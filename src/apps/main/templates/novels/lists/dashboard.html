{% extends 'global/base.html' %} {% load static %} {% block active_container %}container{% endblock active_container %} {% block content %} {% include 'novels/blocks/confirmation_modal.html' %}
<div class="writer-dashboard">
    <form
        id="writer-dashboard-action-form"
        method="POST"
        action="{% url 'novel_dashboard_action' %}"
        hidden
    >
        {% csrf_token %}
    </form>
    <div class="writer-dashboard-actions">
        <a
            href="{% url 'new_novel' %}"
            class="writer-dashboard-action new-novel"
        >
            <i class="fas fa-plus-square"></i>
            Nouveau Roman
        </a>
        <div class="writer-dashboard-action-container">
            <input
                disabled
                form="writer-dashboard-action-form"
                id="writer-dashboard-action-submit"
                value="Valider"
                type="submit"
            />
            <select
                form="writer-dashboard-action-form"
                id="writer-dashboard-action-select"
                name="action"
            >
                <option value="delete">Supprimer</option>
                <option value="publish">Publier</option>
                <option value="unpublish">Depublier</option>
            </select>
        </div>
    </div>
</div>
<ul class="writer-dashboard-novel-list">
    {% if page_obj %} {% for novel in page_obj %}
    <input
        form="writer-dashboard-action-form"
        class="dashboard-item-check"
        type="checkbox"
        id="check-novel-{{ novel.id }}"
        name="selected-novels"
        value="{{ novel.id }}"
        hidden
    />
    <li class="writer-dashboard-novel-list-item">
        <img
            data-novel-id="{{ novel.id }}"
            class="writer-dashboard-novel-item-cover"
            {%
            if
            novel.cover
            %}
            src="{{ novel.cover.url  }}"
            {%
            else
            %}
            {%
            endif
            %}
            alt=""
        />
        <p class="writer-dashboard-novel-item-title">{{ novel.title }}</p>
        <p
            class="writer-dashboard-novel-item-public"
            style="{% if novel.public %} color:green; {% else %} color:red; {% endif %}"
        >
            {% if novel.public %} Public {% else %} Non-Public {% endif %}
        </p>
        <div class="writer-dashboard-novel-item-actions">
            <a
                href="{% url 'chapters' novel.id %}"
                class="novel-item-action novel-item-action-chapters"
            >
                <i class="fas fa-list-ol"></i>
            </a>
            <a
                href="{% url 'edit_novel' novel.id %}"
                class="novel-item-action novel-item-action-edit"
            >
                <i class="far fa-edit"></i>
            </a>
            <a
                data-url="{% url 'delete_novel' novel.id %}"
                class="novel-item-action novel-item-action-delete"
            >
                <i class="fas fa-trash-alt"></i>
            </a>
        </div>
    </li>
    {% endfor %} {% else %} {% endif %}
</ul>

<div class="writer-dashboard-pagination">
    <a {% if page_obj.has_previous %} href="?page=1" class="btn"{% else %} class="btn disabled" {% endif %} >Premier</a>
    <a {% if page_obj.has_previous %} href="?page={{ page_obj.previous_page_number }}" class="btn"{% else %} class="btn disabled" {% endif %} >Precendant</a>
    <div class="writer-dashboard-pagination-indicator">
         {{ page_obj.number }} / {{ page_obj.paginator.num_pages }}
    </div>
    <a {% if page_obj.has_next %} href="?page={{ page_obj.next_page_number }}" class="btn"{% else %} class="btn disabled" {% endif %} >Suivant</a>
    <a {% if page_obj.has_next %} href="?page={{ page_obj.paginator.num_pages }}" class="btn"{% else %} class="btn disabled" {% endif %} >Dernier</a>
</div>

{% endblock content %}
